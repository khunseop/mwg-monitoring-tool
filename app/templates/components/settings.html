{% extends "base.html" %}

{% block content %}

<!-- 통합 설정 폼 -->
<div class="box mb-4">
    <div class="level mb-4">
        <div class="level-left">
            <div class="level-item">
                <h3 class="title is-4 mb-0">설정</h3>
            </div>
        </div>
        <div class="level-right">
            <div class="level-item">
                <div class="buttons">
                    <button class="button is-primary" onclick="saveAllConfig()">저장</button>
                    <span id="cfgStatus" class="tag is-light ml-2">로딩 중...</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SNMP 설정 섹션 -->
<div class="box mb-4">
    <h4 class="title is-5 mb-4">SNMP 설정</h4>
    <div class="columns is-multiline">
        <div class="column is-3">
            <div class="field">
                <label class="label">Community String</label>
                <div class="control">
                    <input class="input" id="cfgCommunity" type="text" placeholder="public" value="public">
                </div>
                <p class="help">SNMP v2c community string (기본값: public)</p>
            </div>
        </div>
    </div>
</div>

<!-- 자원 수집 설정 섹션 -->
<div class="box mb-4">
    <h4 class="title is-5 mb-4">자원 수집 설정</h4>
    <p class="mb-3" style="color: var(--color-text-muted); font-size: 0.875rem;">각 항목의 OID와 경고 임계치를 설정합니다. 임계치는 비워두면 자동 스케일링만 사용합니다.</p>
    <div class="table-container">
        <table class="table is-fullwidth is-narrow">
            <thead>
                <tr>
                    <th style="width: 15%;">항목</th>
                    <th style="width: 45%;">OID</th>
                    <th style="width: 30%;">임계치</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>CPU</strong></td>
                    <td><input class="input is-small" id="cfgOidCpu" placeholder="1.3.6.1.x"></td>
                    <td><input class="input is-small" id="cfgThrCpu" type="number" step="1" min="0" placeholder="예: 80"></td>
                </tr>
                <tr>
                    <td><strong>MEM</strong></td>
                    <td><input class="input is-small" id="cfgOidMem" placeholder="1.3.6.1.x"></td>
                    <td><input class="input is-small" id="cfgThrMem" type="number" step="1" min="0" placeholder="예: 80"></td>
                </tr>
                <tr>
                    <td><strong>CC</strong></td>
                    <td><input class="input is-small" id="cfgOidCc" placeholder="1.3.6.1.x"></td>
                    <td><input class="input is-small" id="cfgThrCc" type="number" step="1" min="0" placeholder="숫자"></td>
                </tr>
                <tr>
                    <td><strong>CS</strong></td>
                    <td><input class="input is-small" id="cfgOidCs" placeholder="1.3.6.1.x"></td>
                    <td><input class="input is-small" id="cfgThrCs" type="number" step="1" min="0" placeholder="숫자"></td>
                </tr>
                <tr>
                    <td><strong>HTTP (누적)</strong></td>
                    <td><input class="input is-small" id="cfgOidHttp" placeholder="1.3.6.1.x"></td>
                    <td><input class="input is-small" id="cfgThrHttp" type="number" step="0.01" min="0" placeholder="Mbps (예: 100)"></td>
                </tr>
                <tr>
                    <td><strong>HTTPS (누적)</strong></td>
                    <td><input class="input is-small" id="cfgOidHttps" placeholder="1.3.6.1.x"></td>
                    <td><input class="input is-small" id="cfgThrHttps" type="number" step="0.01" min="0" placeholder="Mbps (예: 100)"></td>
                </tr>
                <tr>
                    <td><strong>FTP (누적)</strong></td>
                    <td><input class="input is-small" id="cfgOidFtp" placeholder="1.3.6.1.x"></td>
                    <td><input class="input is-small" id="cfgThrFtp" type="number" step="0.01" min="0" placeholder="Mbps (예: 100)"></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

    <!-- 인터페이스 설정 섹션 -->
    <div class="box mb-4">
        <h4 class="title is-5 mb-4">인터페이스 설정</h4>
        <p class="mb-3" style="color: var(--color-text-muted); font-size: 0.875rem;">모니터링할 인터페이스를 추가하세요.</p>
        <div class="table-container">
            <table class="table is-fullwidth is-narrow">
                <thead>
                    <tr>
                        <th style="width: 12%;">인터페이스</th>
                        <th style="width: 25%;">IN OID</th>
                        <th style="width: 25%;">OUT OID</th>
                        <th style="width: 15%;">임계치 (Mbps)</th>
                        <th style="width: 15%;">대역폭 (Mbps)</th>
                        <th style="width: 8%;"></th>
                    </tr>
                </thead>
                <tbody id="cfgInterfaceList">
                    <!-- 동적으로 추가됨 -->
                </tbody>
            </table>
        </div>
        <div class="field mt-3">
            <button class="button is-primary is-small" id="cfgAddInterface" type="button">인터페이스 추가</button>
        </div>
    </div>

<!-- 세션브라우저 설정 섹션 -->
<div class="box mb-4">
    <h4 class="title is-5 mb-4">세션브라우저 설정</h4>
    <div class="columns is-multiline">
        <div class="column is-3">
            <div class="field">
                <label class="label">SSH 포트</label>
                <div class="control">
                    <input class="input" id="sbCfgPort" type="number" min="1" max="65535" value="22">
                </div>
            </div>
        </div>
        
        <div class="column is-3">
            <div class="field">
                <label class="label">타임아웃(초)</label>
                <div class="control">
                    <input class="input" id="sbCfgTimeout" type="number" min="1" max="120" value="10">
                </div>
            </div>
        </div>
        <div class="column is-3">
            <div class="field">
                <label class="label">호스트키 정책</label>
                <div class="control">
                    <div class="select is-fullwidth">
                        <select id="sbCfgHostKeyPolicy">
                            <option value="auto_add">auto_add</option>
                            <option value="reject">reject</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="/static/js/settings.js?v={{ request.app.version }}"></script>
{% endblock %}
